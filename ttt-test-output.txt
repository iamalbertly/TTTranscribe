TTTranscribe Direct API Test (Enhanced)
=======================================
Base: https://iamromeoly-tttranscribe.hf.space
Test URL: https://vm.tiktok.com/ZMAKpqkpN/
Time: 2025-11-29T20:30:23.476Z

=== Testing /health ===
Status: 200 OK
Response: {
  "status": "healthy",
  "version": "1.0.0",
  "uptime": 675.440720151,
  "timestamp": "2025-11-29T20:30:30.016Z",
  "service": "tttranscribe",
  "platform": "huggingface-spaces",
  "baseUrl": "https://iamromeoly-tttranscribe.hf.space",
  "cache": {
    "size": 0,
    "hitRate": 0,
    "hitCount": 0,
    "missCount": 0
  },
  "environment": {
    "hasAuthSecret": true,
    "hasHfApiKey": true,
    "asrProvider": "hf",
    "port": 8788,
    "tmpDir": "/tmp"
  }
}
✅ Server reports it has an auth secret configured.

=== Testing /transcribe WITH X-Engine-Auth ===
Sending X-Engine-Auth header (masked), secretLength=56
URL: https://iamromeoly-tttranscribe.hf.space/transcribe
Payload: { url: "https://vm.tiktok.com/ZMAKpqkpN/" }
Status: 202 Accepted
Success! Job ID: a37a8e40-1b61-479b-9184-460be867b082
Full response: {
  "id": "a37a8e40-1b61-479b-9184-460be867b082",
  "status": "queued",
  "submittedAt": "2025-11-29T20:30:33.253Z",
  "estimatedProcessingTime": 300,
  "url": "https://vm.tiktok.com/ZMAKpqkpN/"
}

=== WAITING FOR TRANSCRIPTION ===
This can take 30 seconds to several minutes depending on video length and service load.

=== Polling Status for Job a37a8e40-1b61-479b-9184-460be867b082 ===
[1/120] Status: processing (15%) - audio_extraction
[2/120] Status: failed (0%) - failed
❌ Job failed: Unknown error
Full error response: {
  "id": "a37a8e40-1b61-479b-9184-460be867b082",
  "status": "failed",
  "progress": 0,
  "submittedAt": "2025-11-29T20:30:33.252Z",
  "currentStep": "failed",
  "server": {
    "requestId": "a37a8e40-1b61-479b-9184-460be867b082",
    "phaseStartTime": 1764448233252,
    "phaseElapsedTime": 1851,
    "createdAt": "2025-11-29T20:30:33.252Z",
    "updatedAt": "2025-11-29T20:30:35.103Z"
  }
}

==================================================
FINAL RESULT: ❌ FAILED
==================================================

Diagnostics:
- Verify TTT_BASE and TTT_SHARED_SECRET are correctly configured in .env.local
- Check that the TTTranscribe service is running and accessible
- Ensure the service implements /transcribe and /status endpoints
