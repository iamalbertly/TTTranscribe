TTTranscribe Direct API Test (Enhanced)
=======================================
Base: https://iamromeoly-tttranscribe.hf.space
Test URL: https://vm.tiktok.com/ZMAKpqkpN/
Time: 2025-11-29T20:49:13.650Z

=== Testing /health ===
Status: 200 OK
Response: {
  "status": "healthy",
  "version": "1.0.0",
  "uptime": 180.351892135,
  "timestamp": "2025-11-29T20:49:20.122Z",
  "service": "tttranscribe",
  "platform": "huggingface-spaces",
  "baseUrl": "https://iamromeoly-tttranscribe.hf.space",
  "cache": {
    "size": 0,
    "hitRate": 0,
    "hitCount": 0,
    "missCount": 0
  },
  "environment": {
    "hasAuthSecret": true,
    "hasHfApiKey": true,
    "asrProvider": "hf",
    "port": 8788,
    "tmpDir": "/tmp"
  }
}
✅ Server reports it has an auth secret configured.

=== Testing /transcribe WITH X-Engine-Auth ===
Sending X-Engine-Auth header (masked), secretLength=56
URL: https://iamromeoly-tttranscribe.hf.space/transcribe
Payload: { url: "https://vm.tiktok.com/ZMAKpqkpN/" }
Status: 202 Accepted
Success! Job ID: 865a01a6-33cf-457c-82ba-0031b99c1cb8
Full response: {
  "id": "865a01a6-33cf-457c-82ba-0031b99c1cb8",
  "status": "queued",
  "submittedAt": "2025-11-29T20:49:24.847Z",
  "estimatedProcessingTime": 300,
  "url": "https://vm.tiktok.com/ZMAKpqkpN/"
}

=== WAITING FOR TRANSCRIPTION ===
This can take 30 seconds to several minutes depending on video length and service load.

=== Polling Status for Job 865a01a6-33cf-457c-82ba-0031b99c1cb8 ===
[1/120] Status: failed (0%) - failed
❌ Job failed: Unknown error
Full error response: {
  "id": "865a01a6-33cf-457c-82ba-0031b99c1cb8",
  "status": "failed",
  "progress": 0,
  "submittedAt": "2025-11-29T20:49:24.846Z",
  "currentStep": "failed",
  "server": {
    "requestId": "865a01a6-33cf-457c-82ba-0031b99c1cb8",
    "phaseStartTime": 1764449364846,
    "phaseElapsedTime": 1981,
    "createdAt": "2025-11-29T20:49:24.846Z",
    "updatedAt": "2025-11-29T20:49:26.827Z"
  }
}

==================================================
FINAL RESULT: ❌ FAILED
==================================================

Diagnostics:
- Verify TTT_BASE and TTT_SHARED_SECRET are correctly configured in .env.local
- Check that the TTTranscribe service is running and accessible
- Ensure the service implements /transcribe and /status endpoints
