TTTranscribe Direct API Test (Enhanced)
=======================================
Base: https://iamromeoly-tttranscribe.hf.space
Test URL: https://vm.tiktok.com/ZMAKpqkpN/
Time: 2025-11-29T21:06:59.048Z

=== Testing /health ===
Status: 200 OK
Response: {
  "status": "healthy",
  "version": "1.0.0",
  "uptime": 206.412758085,
  "timestamp": "2025-11-29T21:07:04.894Z",
  "service": "tttranscribe",
  "platform": "huggingface-spaces",
  "baseUrl": "https://iamromeoly-tttranscribe.hf.space",
  "cache": {
    "size": 0,
    "hitRate": 0,
    "hitCount": 0,
    "missCount": 0
  },
  "environment": {
    "hasAuthSecret": true,
    "hasHfApiKey": true,
    "asrProvider": "hf",
    "port": 8788,
    "tmpDir": "/tmp"
  }
}
✅ Server reports it has an auth secret configured.

=== Testing /transcribe WITH X-Engine-Auth ===
Sending X-Engine-Auth header (masked), secretLength=56
URL: https://iamromeoly-tttranscribe.hf.space/transcribe
Payload: { url: "https://vm.tiktok.com/ZMAKpqkpN/" }
Status: 202 Accepted
Success! Job ID: d5093da2-a71e-428a-93c7-0f11e4693056
Full response: {
  "id": "d5093da2-a71e-428a-93c7-0f11e4693056",
  "status": "queued",
  "submittedAt": "2025-11-29T21:07:07.820Z",
  "estimatedProcessingTime": 300,
  "url": "https://vm.tiktok.com/ZMAKpqkpN/"
}

=== WAITING FOR TRANSCRIPTION ===
This can take 30 seconds to several minutes depending on video length and service load.

=== Polling Status for Job d5093da2-a71e-428a-93c7-0f11e4693056 ===
[1/120] Status: processing (15%) - audio_extraction
[2/120] Status: failed (0%) - failed
❌ Job failed: Unknown error
Full error response: {
  "id": "d5093da2-a71e-428a-93c7-0f11e4693056",
  "status": "failed",
  "progress": 0,
  "submittedAt": "2025-11-29T21:07:07.819Z",
  "currentStep": "failed",
  "server": {
    "requestId": "d5093da2-a71e-428a-93c7-0f11e4693056",
    "phaseStartTime": 1764450427819,
    "phaseElapsedTime": 2733,
    "createdAt": "2025-11-29T21:07:07.819Z",
    "updatedAt": "2025-11-29T21:07:10.552Z"
  }
}

==================================================
FINAL RESULT: ❌ FAILED
==================================================

Diagnostics:
- Verify TTT_BASE and TTT_SHARED_SECRET are correctly configured in .env.local
- Check that the TTTranscribe service is running and accessible
- Ensure the service implements /transcribe and /status endpoints
