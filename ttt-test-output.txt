TTTranscribe Direct API Test (Enhanced)
=======================================
Base: https://iamromeoly-tttranscribe.hf.space
Test URL: https://vm.tiktok.com/ZMAKpqkpN/
Time: 2025-11-29T20:39:55.891Z

=== Testing /health ===
Status: 200 OK
Response: {
  "status": "healthy",
  "version": "1.0.0",
  "uptime": 176.944987352,
  "timestamp": "2025-11-29T20:40:02.431Z",
  "service": "tttranscribe",
  "platform": "huggingface-spaces",
  "baseUrl": "https://iamromeoly-tttranscribe.hf.space",
  "cache": {
    "size": 0,
    "hitRate": 0,
    "hitCount": 0,
    "missCount": 0
  },
  "environment": {
    "hasAuthSecret": true,
    "hasHfApiKey": true,
    "asrProvider": "hf",
    "port": 8788,
    "tmpDir": "/tmp"
  }
}
✅ Server reports it has an auth secret configured.

=== Testing /transcribe WITH X-Engine-Auth ===
Sending X-Engine-Auth header (masked), secretLength=56
URL: https://iamromeoly-tttranscribe.hf.space/transcribe
Payload: { url: "https://vm.tiktok.com/ZMAKpqkpN/" }
Status: 202 Accepted
Success! Job ID: e5996657-82f8-489f-8386-bbf1934de5b3
Full response: {
  "id": "e5996657-82f8-489f-8386-bbf1934de5b3",
  "status": "queued",
  "submittedAt": "2025-11-29T20:40:05.599Z",
  "estimatedProcessingTime": 300,
  "url": "https://vm.tiktok.com/ZMAKpqkpN/"
}

=== WAITING FOR TRANSCRIPTION ===
This can take 30 seconds to several minutes depending on video length and service load.

=== Polling Status for Job e5996657-82f8-489f-8386-bbf1934de5b3 ===
[1/120] Status: processing (15%) - audio_extraction
[2/120] Status: failed (0%) - failed
❌ Job failed: Unknown error
Full error response: {
  "id": "e5996657-82f8-489f-8386-bbf1934de5b3",
  "status": "failed",
  "progress": 0,
  "submittedAt": "2025-11-29T20:40:05.598Z",
  "currentStep": "failed",
  "server": {
    "requestId": "e5996657-82f8-489f-8386-bbf1934de5b3",
    "phaseStartTime": 1764448805598,
    "phaseElapsedTime": 1712,
    "createdAt": "2025-11-29T20:40:05.598Z",
    "updatedAt": "2025-11-29T20:40:07.310Z"
  }
}

==================================================
FINAL RESULT: ❌ FAILED
==================================================

Diagnostics:
- Verify TTT_BASE and TTT_SHARED_SECRET are correctly configured in .env.local
- Check that the TTTranscribe service is running and accessible
- Ensure the service implements /transcribe and /status endpoints
